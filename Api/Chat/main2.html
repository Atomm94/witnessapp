<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>User 1</title>
    <!--    <link href="style.css" rel="stylesheet">-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script>
        const socket = io.connect(
            `http://localhost:5000?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7ImlkIjoiNWZjODk0MDlmYTU1ZTIxZWUwOTEzMzA3IiwiZW1haWwiOiJydWJ5QG1haWwucnUifSwiaWF0IjoxNjA2OTgxMTA5fQ.OASzJEuHJ8Qb00iwNB9tHQJU8mZm1pwwFTHpvS6Aj9Q`
        );
        socket.on("connect", () => {
            console.log("connected to the server");
            socket.on("newMessage", (message) => {
                const m = document.createElement("p");
                m.style = "color: blue";
                m.innerHTML += message;
                document.body.append(m);
                console.log(message);
            });

            send.onclick = function () {

                document.body.append(inp.value);
                socket.emit("message", "5fc894b51fd70a002491c1e3", inp.value);
                const m = document.createElement("p");
                m.style = "color: grey";
                m.innerHTML += inp.value;
                document.body.append(m);
                inp.value = ''
                console.log(inp.value);
            };
        });
    </script>
</head>
<body>
<div id="log"></div><br>
<div style="margin-bottom: 15px;">
    <input type="text" id="msg">
    <input type="submit" value="send" id="sendBtn">
</div>
</body>
</html>